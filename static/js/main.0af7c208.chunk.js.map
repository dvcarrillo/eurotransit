{"version":3,"sources":["components/main/Navbar.jsx","hooks/useAutoplay.jsx","constants.js","components/main/Autoplay.jsx","components/main/YearSelector.jsx","components/sidebar/DoughnutChart.jsx","components/sidebar/StackedBarChart.jsx","components/sidebar/Sidebar.jsx","components/main/MapChart.jsx","components/main/MapTooltip.jsx","components/SidebarContainer.jsx","hooks/useDatasetLimits.jsx","hooks/useColorSet.jsx","components/Main.jsx","components/Loading.jsx","components/Error.jsx","utils.js","hooks/useDatasets.jsx","App.jsx","reportWebVitals.js","index.jsx"],"names":["Navbar","options","selected","setSelected","setClass","useCallback","method","className","map","opt","value","onClick","label","useAutoplay","callback","delay","savedCallback","useRef","useEffect","current","id","setInterval","clearInterval","DATASETS","train2020","planes","train","codes","TRANSPORT_OPTS","YEAR_OPTS","Array","from","length","_","i","year","Autoplay","setYear","play","useState","playing","setPlaying","data-tip","YearSelector","DoughnutChart","countries","filteredCountries","Object","keys","data","filter","x","colors","chroma","scale","mode","geo","properties","ISO_A2","labels","country","datasets","NAME","values","datasetKeyProvider","backgroundColor","borderColor","borderWidth","legend","display","StackedBarChart","dataset","countryCode","idx","years","forEach","push","key","scales","yAxes","stacked","ticks","beginAtZero","xAxes","Sidebar","transport","countryInfo","ISO","imgUrl","class","alt","src","POP_EST","toFixed","MapChart","colorSet","limits","selectedCountries","setHoveredCountry","isSelected","find","c","getCentroid","sum","reduce","acc","coord","y","projection","projectionConfig","rotate","geography","geodata","geographies","amount","v","stroke","background","onMouseEnter","onMouseLeave","style","default","fill","UIAccent","disabled","opacity","outline","transition","hover","cursor","pressed","rsmKey","target","g","originCoords","geometry","coordinates","targetCoords","diff","originName","targetName","thickness","lineWidth","to","strokeWidth","strokeLinecap","ReactTooltipStyled","styled","ReactTooltip","MapTooltip","name","total","population","passengers","tootipContent","SidebarContainer","open","onClose","sidebarContent","mainContent","opened","setOpened","useDatasetsLimits","useMemo","max","Infinity","min","val","Math","useColorSet","isInDarkMode","window","matchMedia","matches","theme","dark","light","UI","accent","plane_trips","train_trips","disabled_dark","disabled_light","Main","setSelectedCountries","hoveredCountry","setTransport","range","domain","Loading","Error","formatData","content","header","meta","origin","indexOf","destination","formated","includes","parseVal","isNaN","Number","yearIdx","row","undefined","formatCC","codesDataset","formatted","formatDataSets","countryCodes","merged","ds","trainBig","plane","mergeDatasets","useDatasets","setData","error","setError","format","handleError","err","console","promises","fetch","then","response","text","a","parse","parsed","res","catch","Promise","all","errors","setTimeout","App","bgMode","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.0af7c208.chunk.js","sourcesContent":["import { useCallback } from \"react\";\n\nconst Navbar = ({ options, selected, setSelected }) => {\n  const setClass = useCallback(\n    (method) => {\n      return selected === method ? \"tab-active\" : \"tab-btn\";\n    },\n    [selected]\n  );\n\n  return (\n    <div className={\"tab navbar\"}>\n      {options.map((opt) => (\n        <button\n          key={opt.value}\n          className={setClass(opt.value)}\n          onClick={() => setSelected(opt.value)}\n        >\n          {opt.label}\n        </button>\n      ))}\n      {/* <button className=\"tab-btn\">About</button> */}\n    </div>\n  );\n};\n\nexport default Navbar;\n","import { useRef, useEffect } from \"react\";\n\nconst useAutoplay = (callback, delay) => {\n  const savedCallback = useRef();\n\n  // Remember the latest callback.\n  useEffect(() => {\n    savedCallback.current = callback;\n  }, [callback]);\n\n  // Set up the interval.\n  useEffect(() => {\n    const tick = () => savedCallback.current();\n    \n    if (delay !== null) {\n      let id = setInterval(tick, delay);\n      return () => clearInterval(id);\n    }\n  }, [delay]);\n};\n\nexport default useAutoplay;\n\n","export const BASE_URL =\n  \"https://raw.githubusercontent.com/dvcarrillo/eurotransit/dev/datasets/\";\n\nexport const DATASETS = {\n  train2020: \"rail_passengers_2020_cleaned.csv\",\n  planes: \"cleaned_planes.csv\",\n  train: \"rail_trips_cleaned.csv\",\n  codes:\"country_codes.csv\",\n};\n\nexport const TRANSPORT_OPTS = [\n  { value: \"plane\", label: \"Plane trips\" },\n  { value: \"train\", label: \"Train trips\" },\n];\n\nexport const YEAR_OPTS = Array.from(\n  { length: 2020 - 2004 + 1 },\n  (_, i) => 2004 + i\n).map((year) => ({\n  value: year,\n  label: year,\n}));\n","import { useState } from \"react\";\nimport { FaRedo } from \"react-icons/fa\";\n\nimport useAutoplay from \"../../hooks/useAutoplay\";\nimport { YEAR_OPTS } from \"../../constants\";\n\nconst Autoplay = ({ setYear, year, play }) => {\n  const [playing, setPlaying] = useState(play);\n\n  useAutoplay(() => {\n    if (playing) {\n      if (year === YEAR_OPTS[YEAR_OPTS.length - 1].value) {\n        setYear(YEAR_OPTS[0].value);\n      } else {\n        setYear(year + 1);\n      }\n    }\n  }, 1000);\n\n  return (\n    <button\n      data-tip=\"Auto play\"\n      className={playing ? \"tab-active\" : \"tab-btn\"}\n      onClick={() => setPlaying(!playing)}\n    >\n      <FaRedo />\n    </button>\n  );\n};\n\nexport default Autoplay;\n","import { useCallback } from \"react\";\nimport Autoplay from './Autoplay';\n\nconst YearSelector = ({ options, selected, setSelected, }) => {\n  const setClass = useCallback(\n    (method) => {\n      return selected === method ? \"tab-active\" : \"tab-btn\";\n    },\n    [selected]\n  );\n\n  return (\n    <div className={\"tab year-selector\"}>\n      {options.map((opt) => (\n        <button\n          key={opt.value}\n          className={setClass(opt.value)}\n          onClick={() => setSelected(opt.value)}\n        >\n          {opt.label}\n        </button>\n      ))}\n      <Autoplay setYear={setSelected} year={selected} play={false} />\n    </div>\n  );\n};\n\nexport default YearSelector;\n","import { Doughnut } from \"react-chartjs-2\";\nimport chroma from \"chroma-js\";\n\nconst DoughnutChart = ({ countries, codes }) => {\n\n  const filteredCountries = Object.keys(countries[0].data).filter(\n    (x) => countries[0].data[x]\n  );\n\n  const colors = chroma\n  .scale([\"rgb(255, 99, 132)\", \"rgb(54, 162, 235)\", \"rgb(75, 192, 192)\"])\n  .mode(\"lch\")\n  .colors(filteredCountries.length);\n\n  // Remove own country\n  countries[0].data[countries[0].geo.properties.ISO_A2] = null;\n\n\n  const data = {\n    labels: filteredCountries.map(country => codes[country]),\n    datasets: [\n      {\n        label: `Outgoing passengers from ${countries[0].geo.properties.NAME}`,\n        data: Object.values(countries[0].data).filter((x) => x),\n        datasetKeyProvider: () => countries[0].geo.properties.NAME, \n        backgroundColor: colors,\n        borderColor: colors,\n        borderWidth: 1,\n      },\n    ],\n  };\n  const options = {\n    legend: { display: false },\n  };\n\n  return <Doughnut options={options} data={data} />;\n};\n\nexport default DoughnutChart;\n","import chroma from \"chroma-js\";\n\nimport { Bar } from \"react-chartjs-2\";\nimport { YEAR_OPTS } from \"../../constants\";\n\nconst StackedBarChart = ({ dataset, countryCode, codes }) => {\n  const countries = Object.keys(dataset[YEAR_OPTS[0].value]);\n  const colors = chroma\n    .scale([\"rgb(255, 99, 132)\", \"rgb(54, 162, 235)\", \"rgb(75, 192, 192)\"])\n    .mode(\"lch\")\n    .colors(countries.length);\n\n  const datasets = countries.map((country, idx) => {\n    \n    const years = [];\n\n    YEAR_OPTS.forEach(({ value }) => {\n\n      // Remove own country\n      if(country === countryCode) return;\n\n      if(dataset?.[value]?.[countryCode]?.[country]) {\n        years.push(dataset[value][countryCode][country]);\n      }\n    });\n\n    return {\n      key:`${country}-${idx}`,\n      label: codes[country],\n      data: years,\n      backgroundColor: colors[idx],\n    }\n  });\n\n  const data = {\n    labels: YEAR_OPTS.map((year) => year.value),\n    datasets: datasets\n  };\n\n  const options = {\n    legend: { display: false },\n    scales: {\n      yAxes: [\n        {\n          stacked: true,\n          ticks: {\n            beginAtZero: true,\n          },\n        },\n      ],\n      xAxes: [\n        {\n          stacked: true,\n        },\n      ],\n    },\n  };\n  \n  return <Bar options={options} data={data} />;\n};\n\nexport default StackedBarChart;\n","import chroma from \"chroma-js\";\n\nimport DoughnutChart from \"./DoughnutChart\";\nimport StackedBarChart from \"./StackedBarChart\";\n\nconst Sidebar = ({ countries, transport, year, dataset, codes }) => {\n  const countryInfo = countries[0]?.geo.properties;\n  const countryCode = countries[0]?.ISO;\n  const imgUrl = `https://www.countryflags.io/${countryCode}/flat/64.png`;\n  return (\n    <div className=\"sidebar\">\n      <div class=\"countryNameContainer\">\n        <img alt={countryInfo.NAME} src={imgUrl}></img>\n        <h2>{countries[0]?.geo.properties.NAME}</h2>\n      </div>\n      <div class=\"sidebarContent\">\n        <div class=\"indicatorContainer\">\n          <div>\n            <h2>{(countryInfo.POP_EST / 1000000).toFixed(2)}M</h2>\n            <p>\n              Population\n            </p>\n          </div>\n          <div class=\"indicator\">\n            <h2>N/A</h2>\n            <p>\n              Passengers per 1M\n            </p>\n          </div>\n        </div>\n        <div>\n          <h5>Outgoing passengers from {countryInfo.NAME}</h5>\n          <DoughnutChart countries={countries} codes={codes} />\n        </div>\n        <div>\n          <h5>Outgoing passengers by year</h5>\n          <StackedBarChart dataset={dataset} countryCode={countryCode} codes={codes} />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Sidebar;\n","import {\n  ComposableMap,\n  Geographies,\n  Geography,\n  ZoomableGroup,\n  Line,\n} from \"react-simple-maps\";\nimport geodata from \"../../geo.json\";\nimport theme from \"../../theme.json\";\n\nconst MapChart = ({\n  dataset,\n  colorSet,\n  scale,\n  limits,\n  transport,\n  selectedCountries,\n  setHoveredCountry,\n  setSelected,\n}) => {\n  const getAcc = (data) => {\n    const amount = data\n      ? Object.values(data).reduce((acc, v) => acc + v || 0, 0)\n      : 0;\n    return amount;\n  };\n  const isSelected = (geo) =>\n    selectedCountries?.find((c) => c.ISO === geo.properties.ISO_A2);\n  const getCentroid = (data) => {\n    if (!data) return [0, 0];\n    const sum = data.reduce(\n      (acc, coord) => {\n        acc.x += coord[0];\n        acc.y += coord[1];\n        return acc;\n      },\n      { x: 0, y: 0 }\n    );\n    return [sum.x / data.length, sum.y / data.length];\n  };\n\n  return (\n    <div className=\"map-chart\">\n      <ComposableMap\n        data-tip=\"\"\n        projection=\"geoAzimuthalEqualArea\"\n        projectionConfig={{\n          rotate: [-15.0, -47.0, 0],\n          scale: 500,\n        }}\n      >\n        <ZoomableGroup>\n          <Geographies geography={geodata}>\n            {({ geographies }) =>\n              geographies.map((geo) => {\n                const amount = getAcc(dataset[geo.properties.ISO_A2]);\n                return (\n                  <Geography\n                    key={geo.rsmKey}\n                    geography={geo}\n                    stroke={colorSet.background}\n                    onClick={() => {\n                      if (!dataset[geo.properties.ISO_A2]) return;\n                      setSelected([\n                        {\n                          geo,\n                          ISO: geo.properties.ISO_A2,\n                          data: dataset[geo.properties.ISO_A2],\n                        },\n                      ]);\n                    }}\n                    onMouseEnter={() => {\n                      setHoveredCountry({\n                        geo,\n                        ISO: geo.properties.ISO_A2,\n                        data: dataset[geo.properties.ISO_A2],\n                      });\n                    }}\n                    onMouseLeave={() => {\n                      setHoveredCountry(null);\n                    }}\n                    style={{\n                      default: {\n                        fill: dataset[geo.properties.ISO_A2]\n                          ? isSelected(geo)\n                            ? colorSet.UIAccent\n                            : scale(amount)\n                          : colorSet.disabled,\n                        opacity: 1,\n                        outline: \"none\",\n                        transition: \"300ms\",\n                      },\n                      hover: {\n                        fill: dataset[geo.properties.ISO_A2]\n                          ? colorSet.UIAccent\n                          : colorSet.disabled,\n                        outline: \"none\",\n                        cursor: \"pointer\",\n                      },\n                      pressed: {\n                        fill: colorSet.UIAccent,\n                        outline: \"none\",\n                      },\n                    }}\n                  />\n                );\n              })\n            }\n          </Geographies>\n          <Geographies geography={geodata}>\n            {({ geographies }) =>\n              geographies.map((geo) => {\n                return (\n                  isSelected(geo) &&\n                  selectedCountries.map((country) => {\n                    return Object.keys(country.data)\n                      .filter((x) => country.data[x])\n                      .map((target) => {\n                        const country = geographies.find(\n                          (g) => g.properties.ISO_A2 === target\n                        );\n\n                        const originCoords = geo.geometry\n                          .coordinates[0][0][0][0]\n                          ? geo.geometry.coordinates[0][0]\n                          : geo.geometry.coordinates[0];\n\n                        const targetCoords = country?.geometry\n                          .coordinates[0][0][0][0]\n                          ? country?.geometry.coordinates[0][0]\n                          : country?.geometry.coordinates[0];\n\n                        if (!originCoords || !targetCoords) return false;\n\n                        const [max, min] = limits;\n\n                        const diff = max - min;\n\n                        const originName = geo.properties.ISO_A2;\n                        const targetName = country.properties.ISO_A2;\n                        const passengers = dataset[originName][targetName];\n                        const thickness = (passengers * 100) / diff;\n                        const lineWidth =\n                          transport === \"train\"\n                            ? thickness / 5 + 2\n                            : thickness;\n\n                        return (\n                          <Line\n                            key={target}\n                            from={getCentroid(originCoords)}\n                            to={getCentroid(targetCoords)}\n                            stroke=\"#A379C9\"\n                            opacity={0.8}\n                            strokeWidth={lineWidth * 4}\n                            strokeLinecap=\"round\"\n                          />\n                        );\n                      });\n                  })\n                );\n              })\n            }\n          </Geographies>\n        </ZoomableGroup>\n      </ComposableMap>\n    </div>\n  );\n};\n\nexport default MapChart;\n","import ReactTooltip from \"react-tooltip\";\nimport styled from 'styled-components';\n\nexport const ReactTooltipStyled = styled(ReactTooltip)`\n  &.type-dark.place-top {\n    background-color: rgba(0, 0, 0, 0.85);\n    padding: 0.3rem 1rem;\n    border-radius: 0;\n  }\n`;\n\nconst MapTooltip = ({ country, transport, year }) => {\n  const tootipContent = () => {\n    if (!country) return;\n    const name = country?.geo.properties.NAME;\n    if (!country.data) {\n      return (\n        <div>\n          <h3>{name}</h3>\n          <p>No data available</p>\n        </div>\n      );\n    }\n    const total = Object.values(country.data).reduce((acc, amount) => {\n      return (acc += amount);\n    }, 0);\n\n    const population = (country.geo.properties.POP_EST / 1000000).toFixed(2);\n    const passengers = (total / 1000000).toFixed(2);\n\n    return (\n      <div>\n        <h3>{name}</h3>\n        <p>\n          Population: <b>{population}M</b>\n        </p>\n        <p>\n          Total passengers leaving by {transport} in {year}:{\" \"}\n          <b>{passengers}M</b>\n        </p>\n      </div>\n    );\n  };\n\n  return <ReactTooltipStyled>{tootipContent()}</ReactTooltipStyled>;\n};\n\nexport default MapTooltip;\n","import { useState, useEffect } from \"react\";\nimport { FiChevronLeft } from \"react-icons/fi\";\n\nconst SidebarContainer = ({ open, onClose, sidebarContent, mainContent }) => {\n  const [opened, setOpened] = useState(false);\n\n  useEffect(() => {\n    setOpened(open);\n  }, [open]);\n\n  const close = () => {\n    setOpened(false);\n    onClose();\n  }\n\n  return (\n    <div className=\"sidebar-container\">\n      {opened && (\n        <div className=\"sidebar-left\">\n          <div className=\"close\" onClick={close}>\n            <FiChevronLeft />\n          </div>\n          {sidebarContent}\n        </div>\n      )}\n      <div className=\"sidebar-right\">\n        {mainContent}\n      </div>\n    </div>\n  );\n};\n\nexport default SidebarContainer;\n","import { useMemo } from \"react\";\n\nconst useDatasetsLimits = (data) => {\n  const limits = useMemo(() => {\n    let max = -Infinity;\n    let min = Infinity;\n    Object.values(data).forEach((year) => {\n      return Object.values(year).forEach((country) =>\n        Object.values(country).forEach((val) => {\n          if (val) {\n            max = Math.max(val, max);\n            min = Math.min(val, min);\n          }\n        })\n      );\n    });\n    return [max, min];\n  }, [data]);\n\n  return limits;\n};\n\nexport default useDatasetsLimits;\n","import theme from \"../../src/theme.json\";\n\nconst useColorSet = (transport) => {\n    // keyvalue with all the colors\n    let colorSet = {\n        background: \"black\",\n        UIAccent: \"black\",\n        disabled: \"black\"\n    }\n\n    const isInDarkMode = () => {\n        return window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;\n    }\n\n    colorSet.background = isInDarkMode() ? theme.map.background.dark : theme.map.background.light;\n    colorSet.UIAccent = (transport == 'plane') ? theme.UI.accent.plane_trips : theme.UI.accent.train_trips;\n    colorSet.disabled = (() => {\n        if (transport == 'plane') {\n            if (isInDarkMode()) {\n                return theme.map.plane_trips.disabled_dark;\n            }\n            else {\n                return theme.map.plane_trips.disabled_light;\n            }\n        }\n        else {\n            if (isInDarkMode()) {\n                return theme.map.train_trips.disabled_dark;\n            }\n            else {\n                return theme.map.train_trips.disabled_light;\n            }\n        }\n    })();\n\n    return colorSet;\n}\n\nexport default useColorSet;\n","import { useState, useMemo, useEffect } from \"react\";\nimport chroma from \"chroma-js\";\n\nimport Navbar from \"./main/Navbar\";\nimport YearSelector from \"./main/YearSelector\";\nimport Sidebar from \"./sidebar/Sidebar\";\nimport Header from \"./main/Header\";\nimport MapChart from \"./main/MapChart\";\nimport MapTooltip from \"./main/MapTooltip\";\nimport SidebarContainer from \"./SidebarContainer\";\nimport Autoplay from \"./main/Autoplay\";\nimport useDatasetsLimits from \"../hooks/useDatasetLimits\";\nimport useColorSet from \"../hooks/useColorSet\";\n\nimport theme from \"../../src/theme.json\";\n\nimport { TRANSPORT_OPTS, YEAR_OPTS } from \"../constants\";\n\nconst Main = ({ datasets }) => {\n  const [year, setYear] = useState(YEAR_OPTS[YEAR_OPTS.length - 1].value);\n  const [selectedCountries, setSelectedCountries] = useState([]);\n  const [hoveredCountry, setHoveredCountry] = useState(null);\n  const [transport, setTransport] = useState(\"plane\");\n\n  const dataset = useMemo(() => datasets[transport][year], [\n    datasets,\n    transport,\n    year,\n  ]);\n\n  const [max, min] = useDatasetsLimits(datasets[transport]);\n\n  const scale = useMemo(() => {\n    const rangeMin =\n      transport == \"plane\"\n        ? theme.map.plane_trips.min\n        : theme.map.train_trips.min;\n    const rangeMax =\n      transport == \"plane\"\n        ? theme.map.plane_trips.max\n        : theme.map.train_trips.max;\n    const range = [rangeMin, rangeMax];\n    return chroma.scale(range).domain([min, max]);\n  }, [max, min]);\n\n  const colorSet = useColorSet(transport);\n\n  useEffect(() => {\n    const countries = selectedCountries.map((country) => {\n      return {\n        ...country,\n        data: dataset[country.ISO],\n      };\n    });\n    setSelectedCountries(countries);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [transport, year]);\n\n  return (\n    <SidebarContainer\n      open={selectedCountries.length > 0}\n      onClose={() => setSelectedCountries([])}\n      sidebarContent={\n        <Sidebar\n          dataset={datasets[transport]}\n          countries={selectedCountries}\n          year={year}\n          transport={transport}\n          codes={datasets.codes}\n        />\n      }\n      mainContent={\n        <div className=\"main\">\n          {/* <Header /> */}\n          <Navbar\n            selected={transport}\n            setSelected={setTransport}\n            options={TRANSPORT_OPTS}\n            colorSet={colorSet}\n          />\n          <MapChart\n            dataset={dataset}\n            colorSet={colorSet}\n            scale={scale}\n            transport={transport}\n            limits={[max, min]}\n            hoveredCountry={hoveredCountry}\n            selectedCountries={selectedCountries}\n            setHoveredCountry={setHoveredCountry}\n            setSelected={setSelectedCountries}\n          />\n          <MapTooltip\n            country={hoveredCountry}\n            transport={transport}\n            year={year}\n          />\n          <YearSelector\n            selected={year}\n            setSelected={setYear}\n            options={YEAR_OPTS}\n          />\n        </div>\n      }\n    />\n  );\n};\n\nexport default Main;\n","const Loading = () => {\n  return <h2 id=\"loadingText\">eurotransit</h2>;\n};\n\nexport default Loading;\n","\nconst Error = () => {\n  return (\n    <div>\n      <h2>eurotransit</h2>\n      <p>[eurotransit is not available right now. Please try again later]</p>\n    </div>\n  );\n};\n\nexport default Error;\n","import { DATASETS } from \"./constants\";\n\nexport const formatData = (dataset) => {\n  const [header, ...data] = dataset.content;\n  const meta = [\"origin\", \"destination\"];\n\n  // Locate origin and destination columns;\n  const origin = header.indexOf(meta[0]);\n  const destination = header.indexOf(meta[1]);\n\n  // Locate years\n  const years = header.filter((x) => !meta.includes(x));\n\n  // Create object with the available years;\n  const formated = years.reduce((acc, year) => {\n    acc[year] = {};\n    return acc;\n  }, {});\n\n  const parseVal = (v) => (isNaN(Number(v)) ? null : Number(v));\n\n  // Fill object;\n  Object.keys(formated).forEach((year) => {\n    const yearIdx = header.indexOf(year);\n\n    data.forEach((row) => {\n      if (row[destination] === undefined) return; // weird error in a ds;\n\n      if (row[origin] in formated[year]) {\n        formated[year][row[origin]][row[destination]] = parseVal(row[yearIdx]);\n      } else {\n        formated[year][row[origin]] = {\n          [row[destination]]: parseVal(row[yearIdx]),\n        };\n      }\n    });\n  });\n\n  return {\n    content: formated,\n    dataset: dataset.dataset,\n  };\n};\n\nconst formatCC = (codesDataset) => {\n  // eslint-disable-next-line no-unused-vars\n  const [_trash, ...data] = codesDataset.content;\n  const formatted = Object.values(data).reduce((acc, country) => {\n    acc[country[1]] = country[0];\n    return acc;\n  }, {});\n\n  return { ...codesDataset, content: formatted };\n};\n\nexport const mergeDatasets = (datasets) => {\n  const planes = datasets.find((ds) => ds.dataset === DATASETS.planes);\n  const trainBig = datasets.find((ds) => ds.dataset === DATASETS.train);\n  const train2020 = datasets.find((ds) => ds.dataset === DATASETS.train2020);\n  const codes = datasets.find((ds) => ds.dataset === DATASETS.codes);\n\n  return {\n    plane: planes.content,\n    train: { ...trainBig.content, ...train2020.content },\n    codes: codes.content,\n  };\n};\n\nexport const formatDataSets = (datasets) => {\n  const countryCodes = datasets.filter((x) => x.dataset === DATASETS.codes);\n  const rest = datasets.filter((x) => x.dataset !== DATASETS.codes);\n  const formated = rest.map(formatData);\n  const countryCodesFormatted = formatCC(...countryCodes);\n  const all = [countryCodesFormatted, ...formated];\n  const merged = mergeDatasets(all);\n\n  // FIXME: shitty fix to remove countries in trains that are not in planes\n  const countries = Object.keys(merged.plane[2020]);\n  Object.values(merged.train).forEach((year) => {\n    Object.keys(year).forEach((country) => {\n      if (!countries.includes(country)) {\n        delete year[country];\n      }\n    });\n  });\n  // -----------------------------------------------------------------------\n\n  return merged;\n};\n","import { useState, useEffect, useCallback } from \"react\";\nimport { parse } from \"papaparse\";\n\nimport { BASE_URL, DATASETS } from \"../constants\";\nimport { formatDataSets } from \"../utils\";\n\nconst useDatasets = () => {\n  const [data, setData] = useState(null);\n  const [error, setError] = useState(null);\n\n  const format = useCallback((ds) => formatDataSets(ds), []);\n\n  const handleError = (err) => {\n    setError(err);\n    console.error(\"Error retrieving the data:\", err);\n  };\n\n  useEffect(() => {\n    const promises = Object.values(DATASETS).map((dataset) =>\n      fetch(BASE_URL + dataset)\n        .then((response) => response.text())\n        .then(async (v) => {\n          const parsed = await parse(v);\n          return {\n            res: parsed,\n            name: dataset,\n          };\n        })\n        .catch(handleError)\n    );\n\n    Promise.all(promises)\n      .then((res) => {\n        const errors = res.filter((x) => x.res.errors.length > 0);\n        const isError = errors.length > 0;\n\n        if (isError) {\n          handleError(errors);\n        } else {\n          const data = res.map((x) => ({\n            content: x.res.data,\n            dataset: x.name,\n          }));\n          setTimeout(() => {\n            const formated = format(data);\n            setData(formated);\n          }, 1500);\n        }\n      })\n      .catch(handleError);\n  }, [format]);\n\n  return [data, error];\n};\n\nexport default useDatasets;\n","import Main from \"./components/Main\";\nimport Loading from \"./components/Loading\";\nimport Error from \"./components/Error\";\nimport useColorSet from \"./hooks/useColorSet\"\nimport useDatasets from \"./hooks/useDatasets\";\n\nimport \"./App.css\";\n\nfunction App() {\n  const [data, error] = useDatasets();\n  const bgMode = {\n    background: useColorSet(\"plane\").background\n  };\n  return (\n    <div className=\"App\" style={bgMode}>\n      {error ? <Error /> : data ? <Main datasets={data} /> : <Loading />}\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}